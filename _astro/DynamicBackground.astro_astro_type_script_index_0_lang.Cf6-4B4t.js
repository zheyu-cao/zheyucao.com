const tt="http://www.w3.org/2000/svg",v=document.getElementById("dynamic-background-svg");if(v){let et=function(t){M||t!==f&&(t<1||t>4||(console.log(`%cFPS Monitor: Switching to Performance Level ${t}.`,"color: orange; font-weight: bold;"),f=t,o.enableShapeChanging=t===4,o.enableMouseInteraction=t>=2,o.enableCollisionDetection=t>=3))},m=function(t,s){return Math.random()*(s-t)+t},it=function(t,s,c,i,r,n){const e=[],l=[],h=[],u=Math.PI*2/n;for(let y=0;y<n;y++){const a=y*u;l.push(a);let d=c+m(-i,i)*c;d+=m(0,r)*c,d=Math.max(c*.2,d),h.push(d),e.push({x:t+Math.cos(a)*d,y:s+Math.sin(a)*d})}return{points:e,angles:l,radii:h}},V=function(t){if(t.length<3)return"";let s=`M ${t[0].x} ${t[0].y}`;const c=t.length;for(let i=0;i<c;i++){const r=t[(i-1+c)%c],n=t[i],e=t[(i+1)%c],l=t[(i+2)%c],h=n.x+(e.x-r.x)/6,u=n.y+(e.y-r.y)/6,y=e.x-(l.x-n.x)/6,a=e.y-(l.y-n.y)/6;s+=` C ${h} ${u}, ${y} ${a}, ${e.x} ${e.y}`}return s+=" Z",s},st=function(t){if(t=t.replace(/^#/,""),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return null;const s=parseInt(t.substring(0,2),16)/255,c=parseInt(t.substring(2,4),16)/255,i=parseInt(t.substring(4,6),16)/255,r=Math.max(s,c,i),n=Math.min(s,c,i);let e=0,l=0;const h=(r+n)/2;if(r===n)e=l=0;else{const u=r-n;switch(l=h>.5?u/(2-r-n):u/(r+n),r){case s:e=(c-i)/u+(c<i?6:0);break;case c:e=(i-s)/u+2;break;case i:e=(s-c)/u+4;break}e/=6}return{h:Math.round(e*360),s:Math.round(l*100),l:Math.round(h*100)}},nt=function(t){for(let s=t.length-1;s>0;s--){const c=Math.floor(Math.random()*(s+1));[t[s],t[c]]=[t[c],t[s]]}return t},ot=function(){L=[],v.innerHTML="",$=document.createElementNS(tt,"g"),v.appendChild($);const{width:t,height:s}=v.getBoundingClientRect(),c=window.innerWidth,i=Math.max(o.minScaleFactor,Math.min(o.maxScaleFactor,c/o.referenceWidth)),r=o.baseLargeMinBlobSize*i,n=o.baseLargeMaxBlobSize*i,e=o.baseSmallMinBlobSize*i,l=o.baseSmallMaxBlobSize*i;let h=[];const u=Object.keys(k);if(u.length===0)console.error("No color Scheme defined! Using fallback."),h=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const a=u[Math.floor(Math.random()*u.length)];console.log(`Using scheme: ${a}`);const d=k[a]?[...k[a]]:[];if(d.length===0)console.error(`Selected scheme '${a}' is empty. Using fallback.`),h=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const C=nt(d);h=[];for(let g=0;g<o.numBlobs;g++)h.push(C[g%C.length]);C.length<o.numBlobs&&console.warn(`Scheme '${a}' has only ${C.length} colors. Repeating colors for ${o.numBlobs} blobs.`)}}const y=Math.ceil(o.numBlobs/2);for(let a=0;a<y;a++)X(a,r,n,h[a],t,s);for(let a=y;a<o.numBlobs;a++)X(a,e,l,h[a%h.length],t,s)},X=function(t,s,c,i,r,n){const e=m(s/2,c/2),l={x:m(e,r-e),y:m(e,n-e)},h=st(i);h||console.error(`Invalid initial hex color: ${i}. Skipping blob ${t}.`);const u=it(0,0,e,.3,.2,8),y=V(u.points),a={x:m(-1,1)*o.speedMultiplier,y:m(-1,1)*o.speedMultiplier},d=m(0,360),C=m(-.15,.15),g=document.createElementNS(tt,"path");g.setAttribute("d",y),h?g.setAttribute("fill",i):g.setAttribute("fill","#808080"),g.setAttribute("transform",`translate(${l.x}, ${l.y}) rotate(${d})`),g.style.opacity=String(o.opacity),$.appendChild(g);const ft={id:t,pathElement:g,position:l,velocity:a,radius:e,color:i,hsl:h||{h:0,s:0,l:50},points:u.points,angle:d,angularVelocity:C,baseAngles:u.angles,baseRadii:u.radii,deformationTime:0,deformationSpeed:m(.005,.015),deformationAmplitude:e*m(.05,.15),update:function(W,dt,pt,mt){if(this.deformationTime+=1,o.enableShapeChanging){const B=[],b=this.baseAngles.length;for(let p=0;p<b;p++){const F=this.baseAngles[p],S=this.baseRadii[p],I=Math.sin(this.deformationTime*this.deformationSpeed+F*3)*this.deformationAmplitude,P=Math.max(S*.3,S+I),N=Math.cos(F)*P,O=Math.sin(F)*P;B.push({x:N,y:O})}const x=V(B);this.pathElement.setAttribute("d",x)}if(this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.angle+=this.angularVelocity,o.enableMouseInteraction&&W){const B=this.position.x-W.x,b=this.position.y-W.y,x=Math.sqrt(B*B+b*b),p=o.mouseInfluenceRadius+this.radius*1.2;if(x<p){const F=((p-x)/p)**1.5,S=Math.atan2(b,B);this.velocity.x+=Math.cos(S)*F*o.mouseForce*o.speedMultiplier*5,this.velocity.y+=Math.sin(S)*F*o.mouseForce*o.speedMultiplier*5}}const _=Math.sqrt(this.velocity.x**2+this.velocity.y**2),q=1.5*o.speedMultiplier;if(_>q&&(this.velocity.x*=q/_,this.velocity.y*=q/_),this.velocity.x*=.99,this.velocity.y*=.99,o.enableCollisionDetection)for(const b of dt){if(this.id===b.id)continue;const x=b.position.x-this.position.x,p=b.position.y-this.position.y,F=Math.sqrt(x*x+p*p),S=(this.radius+b.radius)*.5;if(F<S){const I=S-F,P=Math.atan2(p,x),N=Math.cos(P)*I*.01,O=Math.sin(P)*I*.01;this.velocity.x-=N,this.velocity.y-=O}}const K=pt,Q=mt,z=.05*o.speedMultiplier;this.position.x<this.radius&&(this.velocity.x+=z),this.position.x>K-this.radius&&(this.velocity.x-=z),this.position.y<this.radius&&(this.velocity.y+=z),this.position.y>Q-this.radius&&(this.velocity.y-=z),this.position.x=Math.max(this.radius/2,Math.min(K-this.radius/2,this.position.x)),this.position.y=Math.max(this.radius/2,Math.min(Q-this.radius/2,this.position.y));const H=.01;Math.abs(this.velocity.x)<H&&Math.abs(this.velocity.y)<H&&Math.abs(this.angularVelocity)<H||this.pathElement.setAttribute("transform",`translate(${this.position.x}, ${this.position.y}) rotate(${this.angle})`)}};L.push(ft)},Y=function(t){const s=t-U;if(U=t,!M&&s>0){const r=1e3/s;if(w.push(r),w.length>T&&w.shift(),w.length===T){const n=w.reduce((l,h)=>l+h,0)/T;let e=f;if(n<Z?e=1:n<J?e=2:n<at?e=3:e=4,e===f)A=0;else{let l=!1;e>f?(f===1&&n>=ct||f===2&&n>=lt||f===3&&n>=rt)&&(l=!0):(f===4&&n<ht||f===3&&n<J||f===2&&n<Z)&&(l=!0),l?(A++,A>=ut&&(et(e),A=0)):A=0}console.log(`Avg FPS: ${n.toFixed(1)}, Level: ${f}`)}}const{width:c,height:i}=v.getBoundingClientRect();$&&(E.x+=(D.x-E.x)*j,E.y+=(D.y-E.y)*j,$.setAttribute("transform",`translate(${E.x}, ${E.y})`)),L.forEach(r=>r.update(R,L,c,i)),requestAnimationFrame(Y)};const M="maxTouchPoints"in navigator&&navigator.maxTouchPoints>0||window.innerWidth<1024;console.log(`Lower performance device detected: ${M}`);const o={numBlobs:M?2:4,baseLargeMinBlobSize:1e3,baseLargeMaxBlobSize:1600,baseSmallMinBlobSize:600,baseSmallMaxBlobSize:1e3,referenceWidth:1440,minScaleFactor:.5,maxScaleFactor:1.5,speedMultiplier:M?.5:1,mouseInfluenceRadius:580,mouseForce:-800,opacity:.8,enableShapeChanging:!1,enableCollisionDetection:!M,enableMouseInteraction:!M};let L=[],R=null,$=null;const D={x:0,y:0},E={x:0,y:0},j=.05,G=-.03;let f=M?1:3;const w=[],T=60;let U=performance.now();const Z=30,ct=35,J=40,lt=45,at=55,rt=55,ht=50;let A=0;const ut=30;v.classList.add("css-hue-shift-active");const k={reds:["#FF6B6B","#FFD93D","#F2bF47","#F2B707","#F28706","#F26430"],oranges:["#FFa700","#FF9B58","#F27149","#F9c443","#faD93D"],yellows:["#FFD700","#FFDB58","#F2E109","#F9D423","#caD93D"],greens:["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"],cyans:["#40E0D0","#AFEEEE","#7FFFD4","#B3E0F2","#9EfDF2"],blues:["#87CEEB","#64f5ED","#7De6FF","#42d5FF","#7299f9"],forest:["#64f5ED","#F2E109","#32CD32","#32CD32","#a0e9c4"],purples:["#996BcB","#c2aFF7","#8267d7","#FF55ff","#e264d0"],browns:["#8B4513","#A0522D","#D2691E","#DAA520","#8B3030"],winter:["#87CEEB","#64f5ED","#7De6FF","#cccccc","#ffffff"]};window.addEventListener("mousemove",t=>{if(o.enableMouseInteraction){const s=v.getBoundingClientRect(),c=t.clientX,i=t.clientY;R={x:c-s.left,y:i-s.top};const r=window.innerWidth/2,n=window.innerHeight/2;D.x=(c-r)*G,D.y=(i-n)*G}}),window.addEventListener("mouseleave",()=>{R=null,D.x=0,D.y=0}),ot(),requestAnimationFrame(Y)}else console.error("Dynamic background SVG container not found.");
