import{g as t}from"./index.Brfk6Bdo.js";import{S as n}from"./ScrollTrigger.6qCihK2t.js";import{S as g}from"./ScrollToPlugin.D0CRiLCf.js";t.registerPlugin(n,g);let i=null,r=null,e=null,c=!1;function S(){console.log("[ScrollIndicator] cleanupTriggers CALLED."),i&&(console.log("[ScrollIndicator] Killing Scrub Trigger..."),i.kill(),i=null),r&&(console.log("[ScrollIndicator] Killing Callback Trigger..."),r.kill(),r=null),e!==null&&(clearTimeout(e),e=null,console.log("[ScrollIndicator] Cleared pending fade-in timeout during cleanup."))}function m(l,o){console.log("[ScrollIndicator] setupIndicatorAnimation CALLED."),console.log("[ScrollIndicator] Setting up new triggers...");const a=t.fromTo(l,{opacity:.6},{opacity:0,immediateRender:!1});i=n.create({trigger:o,scroller:o,start:"10px top",end:"+=150",animation:a,scrub:.5}),console.log("[ScrollIndicator] Setup new indicator Scrub Trigger");const s=(d=0)=>{i?.isActive||(e!==null&&clearTimeout(e),e=setTimeout(()=>{o.scrollTop<10&&t.to(l,{opacity:.6,duration:.5,overwrite:!0})},d))},u=()=>{e!==null&&clearTimeout(e),i?.isActive||t.to(l,{opacity:0,duration:.3,overwrite:!0})};t.set(l,{opacity:0}),o.scrollTop<10&&s(3e3),r=n.create({trigger:o,scroller:o,start:"10px top",onEnter:u,onLeaveBack:()=>{o.scrollTop<5?u():s(3e3)}}),console.log("[ScrollIndicator] Setup new indicator Callback Trigger")}function f(l,o){if(c){console.log("[ScrollIndicator] Click listener already attached. Skipping.");return}console.log("[ScrollIndicator] Attaching click listener."),l.addEventListener("click",()=>{parseFloat(window.getComputedStyle(l).opacity)>.1&&t.to(o,{duration:1.6,scrollTo:o.scrollTop+o.clientHeight,ease:"power2.out"})}),c=!0}document.addEventListener("astro:page-load",()=>{console.log(`[ScrollIndicator] astro:page-load DETECTED on path: "${window.location.pathname}".`),S();const l=document.querySelector("#scroll-indicator"),o=document.querySelector(".page-wrapper");l&&o?(console.log("[ScrollIndicator] Indicator element FOUND. Proceeding with setup."),m(l,o),f(l,o)):(console.log("[ScrollIndicator] Indicator element NOT FOUND. Skipping setup."),c=!1)},{once:!1});
