const tt="http://www.w3.org/2000/svg",C=document.getElementById("dynamic-background-svg");if(C){let et=function(t){x||t!==g&&(t<1||t>4||(console.log(`%cFPS Monitor: Switching to Performance Level ${t}.`,"color: orange; font-weight: bold;"),g=t,a.enableShapeChanging=t===4,a.enableMouseInteraction=t>=2,a.enableCollisionDetection=t>=3))},m=function(t,n){return Math.random()*(n-t)+t},st=function(t,n,o,s,r,c){const e=[],i=[],l=[],u=Math.PI*2/c;for(let f=0;f<c;f++){const h=f*u;i.push(h);let d=o+m(-s,s)*o;d+=m(0,r)*o,d=Math.max(o*.2,d),l.push(d),e.push({x:t+Math.cos(h)*d,y:n+Math.sin(h)*d})}return{points:e,angles:i,radii:l}},V=function(t){if(t.length<3)return"";let n=`M ${t[0].x} ${t[0].y}`;const o=t.length;for(let s=0;s<o;s++){const r=t[(s-1+o)%o],c=t[s],e=t[(s+1)%o],i=t[(s+2)%o],l=c.x+(e.x-r.x)/6,u=c.y+(e.y-r.y)/6,f=e.x-(i.x-c.x)/6,h=e.y-(i.y-c.y)/6;n+=` C ${l} ${u}, ${f} ${h}, ${e.x} ${e.y}`}return n+=" Z",n},it=function(t){if(t=t.replace(/^#/,""),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return null;const n=parseInt(t.substring(0,2),16)/255,o=parseInt(t.substring(2,4),16)/255,s=parseInt(t.substring(4,6),16)/255,r=Math.max(n,o,s),c=Math.min(n,o,s);let e=0,i=0;const l=(r+c)/2;if(r===c)e=i=0;else{const u=r-c;switch(i=l>.5?u/(2-r-c):u/(r+c),r){case n:e=(o-s)/u+(o<s?6:0);break;case o:e=(s-n)/u+2;break;case s:e=(n-o)/u+4;break}e/=6}return{h:Math.round(e*360),s:Math.round(i*100),l:Math.round(l*100)}},nt=function(t,n,o){n/=100,o/=100;const s=(1-Math.abs(2*o-1))*n,r=s*(1-Math.abs(t/60%2-1)),c=o-s/2;let e=0,i=0,l=0;0<=t&&t<60?(e=s,i=r,l=0):60<=t&&t<120?(e=r,i=s,l=0):120<=t&&t<180?(e=0,i=s,l=r):180<=t&&t<240?(e=0,i=r,l=s):240<=t&&t<300?(e=r,i=0,l=s):300<=t&&t<360&&(e=s,i=0,l=r),e=Math.round((e+c)*255),i=Math.round((i+c)*255),l=Math.round((l+c)*255);const u=f=>f.toString(16).padStart(2,"0");return`#${u(e)}${u(i)}${u(l)}`},ot=function(t){for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t},ct=function(){z=[],C.innerHTML="",$=document.createElementNS(tt,"g"),C.appendChild($);const{width:t,height:n}=C.getBoundingClientRect(),o=window.innerWidth,s=Math.max(a.minScaleFactor,Math.min(a.maxScaleFactor,o/a.referenceWidth)),r=a.baseLargeMinBlobSize*s,c=a.baseLargeMaxBlobSize*s,e=a.baseSmallMinBlobSize*s,i=a.baseSmallMaxBlobSize*s;let l=[];const u=Object.keys(k);if(u.length===0)console.error("No color Scheme defined! Using fallback."),l=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const h=u[Math.floor(Math.random()*u.length)];console.log(`Using scheme: ${h}`);const d=k[h]?[...k[h]]:[];if(d.length===0)console.error(`Selected scheme '${h}' is empty. Using fallback.`),l=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const E=ot(d);l=[];for(let b=0;b<a.numBlobs;b++)l.push(E[b%E.length]);E.length<a.numBlobs&&console.warn(`Scheme '${h}' has only ${E.length} colors. Repeating colors for ${a.numBlobs} blobs.`)}}const f=Math.ceil(a.numBlobs/2);for(let h=0;h<f;h++)X(h,r,c,l[h],t,n);for(let h=f;h<a.numBlobs;h++)X(h,e,i,l[h%l.length],t,n)},X=function(t,n,o,s,r,c){const e=m(n/2,o/2),i={x:m(e,r-e),y:m(e,c-e)},l=it(s);l||console.error(`Invalid initial hex color: ${s}. Skipping blob ${t}.`);const u=st(0,0,e,.3,.2,8),f=V(u.points),h={x:m(-1,1)*a.speedMultiplier,y:m(-1,1)*a.speedMultiplier},d=m(0,360),E=m(-.15,.15),b=document.createElementNS(tt,"path");b.setAttribute("d",f),l?b.setAttribute("fill",s):b.setAttribute("fill","#808080"),b.setAttribute("transform",`translate(${i.x}, ${i.y}) rotate(${d})`),b.style.opacity=String(a.opacity),$.appendChild(b);const pt={id:t,pathElement:b,position:i,velocity:h,radius:e,color:s,hsl:l||{h:0,s:0,l:50},points:u.points,angle:d,angularVelocity:E,baseAngles:u.angles,baseRadii:u.radii,deformationTime:0,deformationSpeed:m(.005,.015),deformationAmplitude:e*m(.05,.15),update:function(H,mt,gt,bt){if(this.deformationTime+=1,a.enableShapeChanging){const M=[],y=this.baseAngles.length;for(let p=0;p<y;p++){const F=this.baseAngles[p],B=this.baseRadii[p],L=Math.sin(this.deformationTime*this.deformationSpeed+F*3)*this.deformationAmplitude,P=Math.max(B*.3,B+L),N=Math.cos(F)*P,O=Math.sin(F)*P;M.push({x:N,y:O})}const S=V(M);this.pathElement.setAttribute("d",S)}this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.angle+=this.angularVelocity;{this.hsl.h=(this.hsl.h+dt+360)%360;const M=nt(this.hsl.h,this.hsl.s,this.hsl.l);this.pathElement.setAttribute("fill",M)}if(a.enableMouseInteraction&&H){const M=this.position.x-H.x,y=this.position.y-H.y,S=Math.sqrt(M*M+y*y),p=a.mouseInfluenceRadius+this.radius*1.2;if(S<p){const F=((p-S)/p)**1.5,B=Math.atan2(y,M);this.velocity.x+=Math.cos(B)*F*a.mouseForce*a.speedMultiplier*5,this.velocity.y+=Math.sin(B)*F*a.mouseForce*a.speedMultiplier*5}}const W=Math.sqrt(this.velocity.x**2+this.velocity.y**2),_=1.5*a.speedMultiplier;if(W>_&&(this.velocity.x*=_/W,this.velocity.y*=_/W),this.velocity.x*=.99,this.velocity.y*=.99,a.enableCollisionDetection)for(const y of mt){if(this.id===y.id)continue;const S=y.position.x-this.position.x,p=y.position.y-this.position.y,F=Math.sqrt(S*S+p*p),B=(this.radius+y.radius)*.5;if(F<B){const L=B-F,P=Math.atan2(p,S),N=Math.cos(P)*L*.01,O=Math.sin(P)*L*.01;this.velocity.x-=N,this.velocity.y-=O}}const K=gt,Q=bt,I=.05*a.speedMultiplier;this.position.x<this.radius&&(this.velocity.x+=I),this.position.x>K-this.radius&&(this.velocity.x-=I),this.position.y<this.radius&&(this.velocity.y+=I),this.position.y>Q-this.radius&&(this.velocity.y-=I),this.position.x=Math.max(this.radius/2,Math.min(K-this.radius/2,this.position.x)),this.position.y=Math.max(this.radius/2,Math.min(Q-this.radius/2,this.position.y));const q=.01;Math.abs(this.velocity.x)<q&&Math.abs(this.velocity.y)<q&&Math.abs(this.angularVelocity)<q||this.pathElement.setAttribute("transform",`translate(${this.position.x}, ${this.position.y}) rotate(${this.angle})`)}};z.push(pt)},Y=function(t){const n=t-U;if(U=t,!x&&n>0){const r=1e3/n;if(w.push(r),w.length>R&&w.shift(),w.length===R){const c=w.reduce((i,l)=>i+l,0)/R;let e=g;if(c<Z?e=1:c<J?e=2:c<rt?e=3:e=4,e===g)A=0;else{let i=!1;e>g?(g===1&&c>=lt||g===2&&c>=at||g===3&&c>=ht)&&(i=!0):(g===4&&c<ut||g===3&&c<J||g===2&&c<Z)&&(i=!0),i?(A++,A>=ft&&(et(e),A=0)):A=0}}}const{width:o,height:s}=C.getBoundingClientRect();$&&(D.x+=(v.x-D.x)*j,D.y+=(v.y-D.y)*j,$.setAttribute("transform",`translate(${D.x}, ${D.y})`)),z.forEach(r=>r.update(T,z,o,s)),requestAnimationFrame(Y)};const x="maxTouchPoints"in navigator&&navigator.maxTouchPoints>0||window.innerWidth<1024;console.log(`Lower performance device detected: ${x}`);const a={numBlobs:x?2:4,baseLargeMinBlobSize:1e3,baseLargeMaxBlobSize:1600,baseSmallMinBlobSize:600,baseSmallMaxBlobSize:1e3,referenceWidth:1440,minScaleFactor:.5,maxScaleFactor:1.5,speedMultiplier:x?.5:1,mouseInfluenceRadius:580,mouseForce:-800,opacity:.8,enableShapeChanging:!1,enableCollisionDetection:!x,enableMouseInteraction:!x};let z=[],T=null,$=null;const v={x:0,y:0},D={x:0,y:0},j=.05,G=-.03;let g=x?1:3;const w=[],R=60;let U=performance.now();const Z=30,lt=35,J=40,at=45,rt=55,ht=55,ut=50;let A=0;const ft=30,k={reds:["#FF6B6B","#FFD93D","#F2bF47","#F2B707","#F28706","#F26430"],oranges:["#FFa700","#FF9B58","#F27149","#F9c443","#faD93D"],yellows:["#FFD700","#FFDB58","#F2E109","#F9D423","#caD93D"],greens:["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"],cyans:["#40E0D0","#AFEEEE","#7FFFD4","#B3E0F2","#9EfDF2"],blues:["#87CEEB","#64f5ED","#7De6FF","#42d5FF","#7299f9"],forest:["#64f5ED","#F2E109","#32CD32","#32CD32","#a0e9c4"],purples:["#996BcB","#c2aFF7","#8267d7","#FF55ff","#e264d0"],browns:["#8B4513","#A0522D","#D2691E","#DAA520","#8B3030"],winter:["#87CEEB","#64f5ED","#7De6FF","#cccccc","#ffffff"]},dt=.4;window.addEventListener("mousemove",t=>{if(a.enableMouseInteraction){const n=C.getBoundingClientRect(),o=t.clientX,s=t.clientY;T={x:o-n.left,y:s-n.top};const r=window.innerWidth/2,c=window.innerHeight/2;v.x=(o-r)*G,v.y=(s-c)*G}}),window.addEventListener("mouseleave",()=>{T=null,v.x=0,v.y=0}),ct(),requestAnimationFrame(Y)}else console.error("Dynamic background SVG container not found.");
