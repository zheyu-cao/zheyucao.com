const j="http://www.w3.org/2000/svg",$=document.getElementById("dynamic-background-svg");if($){let m=function(t,o){return Math.random()*(o-t)+t},G=function(t,o,n,e,c,a){const s=[],l=[],i=[],u=Math.PI*2/a;for(let d=0;d<a;d++){const r=d*u;l.push(r);let p=n+m(-e,e)*n;p+=m(0,c)*n,p=Math.max(n*.2,p),i.push(p),s.push({x:t+Math.cos(r)*p,y:o+Math.sin(r)*p})}return{points:s,angles:l,radii:i}},I=function(t){if(t.length<3)return"";let o=`M ${t[0].x} ${t[0].y}`;const n=t.length;for(let e=0;e<n;e++){const c=t[(e-1+n)%n],a=t[e],s=t[(e+1)%n],l=t[(e+2)%n],i=a.x+(s.x-c.x)/6,u=a.y+(s.y-c.y)/6,d=s.x-(l.x-a.x)/6,r=s.y-(l.y-a.y)/6;o+=` C ${i} ${u}, ${d} ${r}, ${s.x} ${s.y}`}return o+=" Z",o},O=function(t){if(t=t.replace(/^#/,""),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return null;const o=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,e=parseInt(t.substring(4,6),16)/255,c=Math.max(o,n,e),a=Math.min(o,n,e);let s=0,l=0;const i=(c+a)/2;if(c===a)s=l=0;else{const u=c-a;switch(l=i>.5?u/(2-c-a):u/(c+a),c){case o:s=(n-e)/u+(n<e?6:0);break;case n:s=(e-o)/u+2;break;case e:s=(o-n)/u+4;break}s/=6}return{h:Math.round(s*360),s:Math.round(l*100),l:Math.round(i*100)}},U=function(t,o,n){o/=100,n/=100;const e=(1-Math.abs(2*n-1))*o,c=e*(1-Math.abs(t/60%2-1)),a=n-e/2;let s=0,l=0,i=0;0<=t&&t<60?(s=e,l=c,i=0):60<=t&&t<120?(s=c,l=e,i=0):120<=t&&t<180?(s=0,l=e,i=c):180<=t&&t<240?(s=0,l=c,i=e):240<=t&&t<300?(s=c,l=0,i=e):300<=t&&t<360&&(s=e,l=0,i=c),s=Math.round((s+a)*255),l=Math.round((l+a)*255),i=Math.round((i+a)*255);const u=d=>d.toString(16).padStart(2,"0");return`#${u(s)}${u(l)}${u(i)}`},V=function(t){for(let o=t.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[t[o],t[n]]=[t[n],t[o]]}return t},Z=function(){E=[],$.innerHTML="",v=document.createElementNS(j,"g"),$.appendChild(v);const{width:t,height:o}=$.getBoundingClientRect(),n=window.innerWidth,e=Math.max(h.minScaleFactor,Math.min(h.maxScaleFactor,n/h.referenceWidth)),c=h.baseLargeMinBlobSize*e,a=h.baseLargeMaxBlobSize*e,s=h.baseSmallMinBlobSize*e,l=h.baseSmallMaxBlobSize*e;let i=[];const u=Object.keys(C);if(u.length===0)console.error("No color Scheme defined! Using fallback."),i=["#80f080","#38a8f8","#20e020","#f0f808"];else{const r=u[Math.floor(Math.random()*u.length)];console.log(`Using scheme: ${r}`);const p=C[r]?[...C[r]]:[];if(p.length===0)console.error(`Selected scheme '${r}' is empty. Using fallback.`),i=["#80f080","#38a8f8","#20e020","#f0f808"];else{const B=V(p);i=[];for(let g=0;g<h.numBlobs;g++)i.push(B[g%B.length]);B.length<h.numBlobs&&console.warn(`Scheme '${r}' has only ${B.length} colors. Repeating colors for ${h.numBlobs} blobs.`)}}const d=Math.floor(h.numBlobs/2);for(let r=0;r<d;r++)H(r,c,a,i[r],t,o);for(let r=d;r<h.numBlobs;r++)H(r,s,l,i[r%i.length],t,o)},H=function(t,o,n,e,c,a){const s=m(o/2,n/2),l={x:m(s,c-s),y:m(s,a-s)},i=O(e);i||console.error(`Invalid initial hex color: ${e}. Skipping blob ${t}.`);const u=G(0,0,s,.3,.2,8),d=I(u.points),r={x:m(-1,1)*h.speedMultiplier,y:m(-1,1)*h.speedMultiplier},p=m(0,360),B=m(-.15,.15),g=document.createElementNS(j,"path");g.setAttribute("d",d),i?g.setAttribute("fill",e):g.setAttribute("fill","#808080"),g.setAttribute("transform",`translate(${l.x}, ${l.y}) rotate(${p})`),g.style.opacity=String(h.opacity),v.appendChild(g);const K={id:t,pathElement:g,position:l,velocity:r,radius:s,color:e,hsl:i||{h:0,s:0,l:50},points:u.points,angle:p,angularVelocity:B,baseAngles:u.angles,baseRadii:u.radii,deformationTime:0,deformationSpeed:m(.005,.015),deformationAmplitude:s*m(.05,.15),update:function(z,Q){this.deformationTime+=1;const W=[],_=this.baseAngles.length;for(let f=0;f<_;f++){const y=this.baseAngles[f],b=this.baseRadii[f],M=Math.cos(y)*b,x=Math.sin(y)*b;W.push({x:M,y:x})}const tt=I(W);this.pathElement.setAttribute("d",tt),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.angle+=this.angularVelocity,this.hsl.h=(this.hsl.h+J+360)%360;const et=U(this.hsl.h,this.hsl.s,this.hsl.l);if(this.pathElement.setAttribute("fill",et),z){const f=this.position.x-z.x,y=this.position.y-z.y,b=Math.sqrt(f*f+y*y),M=h.mouseInfluenceRadius+this.radius*1.2;if(b<M){const x=((M-b)/M)**1.5,w=Math.atan2(y,f);this.velocity.x+=Math.cos(w)*x*h.mouseForce*h.speedMultiplier*5,this.velocity.y+=Math.sin(w)*x*h.mouseForce*h.speedMultiplier*5}}const L=Math.sqrt(this.velocity.x**2+this.velocity.y**2),k=1.5*h.speedMultiplier;L>k&&(this.velocity.x*=k/L,this.velocity.y*=k/L),this.velocity.x*=.99,this.velocity.y*=.99;const T=.01;for(const f of Q){if(this.id===f.id)continue;const y=f.position.x-this.position.x,b=f.position.y-this.position.y,M=Math.sqrt(y*y+b*b),x=(this.radius+f.radius)*.5;if(M<x){const w=x-M,Y=Math.atan2(b,y),st=Math.cos(Y)*w*T,nt=Math.sin(Y)*w*T;this.velocity.x-=st,this.velocity.y-=nt}}const{width:q,height:X}=$.getBoundingClientRect(),D=.05*h.speedMultiplier;this.position.x<this.radius&&(this.velocity.x+=D),this.position.x>q-this.radius&&(this.velocity.x-=D),this.position.y<this.radius&&(this.velocity.y+=D),this.position.y>X-this.radius&&(this.velocity.y-=D),this.position.x=Math.max(this.radius/2,Math.min(q-this.radius/2,this.position.x)),this.position.y=Math.max(this.radius/2,Math.min(X-this.radius/2,this.position.y)),this.pathElement.setAttribute("transform",`translate(${this.position.x}, ${this.position.y}) rotate(${this.angle})`)}};E.push(K)},N=function(){v&&(S.x+=(F.x-S.x)*P,S.y+=(F.y-S.y)*P,v.setAttribute("transform",`translate(${S.x}, ${S.y})`)),E.forEach(t=>t.update(A,E)),requestAnimationFrame(N)};const h={numBlobs:4,baseLargeMinBlobSize:900,baseLargeMaxBlobSize:1400,baseSmallMinBlobSize:600,baseSmallMaxBlobSize:900,referenceWidth:1440,minScaleFactor:.5,maxScaleFactor:1.5,speedMultiplier:1,mouseInfluenceRadius:580,mouseForce:-800,opacity:.8};let E=[],A=null,v=null;const F={x:0,y:0},S={x:0,y:0},P=.05,R=-.03,C={reds:["#FF6B6B","#FFD93D","#F2bF47","#F2B707","#F28706","#F26430"],oranges:["#FFa700","#FF9B58","#F27149","#F9c443","#faD93D"],yellows:["#FFD700","#FFDB58","#F2E109","#F9D423","#caD93D"],greens:["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"],cyans:["#40E0D0","#AFEEEE","#7FFFD4","#B3E0F2","#9EfDF2"],blues:["#87CEEB","#64f5ED","#7De6FF","#42d5FF","#7299f9"],garden:["#80f080","#38d8f8","#20e020","#f0f808"]},J=.4;window.addEventListener("mousemove",t=>{const o=$.getBoundingClientRect(),n=t.clientX,e=t.clientY;A={x:n-o.left,y:e-o.top};const c=window.innerWidth/2,a=window.innerHeight/2;F.x=(n-c)*R,F.y=(e-a)*R}),window.addEventListener("mouseleave",()=>{A=null,F.x=0,F.y=0}),Z(),N()}else console.error("Dynamic background SVG container not found.");
