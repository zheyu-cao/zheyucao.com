const tt="http://www.w3.org/2000/svg",v=document.getElementById("dynamic-background-svg");if(v){let et=function(t){F||t!==m&&(t<1||t>4||(console.log(`%cFPS Monitor: Switching to Performance Level ${t}.`,"color: orange; font-weight: bold;"),m=t,n.enableShapeChanging=t===4,n.enableMouseInteraction=t>=2,n.enableCollisionDetection=t>=3))},p=function(t,s){return Math.random()*(s-t)+t},it=function(t,s,o,i,r,c){const e=[],a=[],h=[],u=Math.PI*2/c;for(let y=0;y<c;y++){const l=y*u;a.push(l);let f=o+p(-i,i)*o;f+=p(0,r)*o,f=Math.max(o*.2,f),h.push(f),e.push({x:t+Math.cos(l)*f,y:s+Math.sin(l)*f})}return{points:e,angles:a,radii:h}},V=function(t){if(t.length<3)return"";let s=`M ${t[0].x} ${t[0].y}`;const o=t.length;for(let i=0;i<o;i++){const r=t[(i-1+o)%o],c=t[i],e=t[(i+1)%o],a=t[(i+2)%o],h=c.x+(e.x-r.x)/6,u=c.y+(e.y-r.y)/6,y=e.x-(a.x-c.x)/6,l=e.y-(a.y-c.y)/6;s+=` C ${h} ${u}, ${y} ${l}, ${e.x} ${e.y}`}return s+=" Z",s},st=function(t){if(t=t.replace(/^#/,""),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return null;const s=parseInt(t.substring(0,2),16)/255,o=parseInt(t.substring(2,4),16)/255,i=parseInt(t.substring(4,6),16)/255,r=Math.max(s,o,i),c=Math.min(s,o,i);let e=0,a=0;const h=(r+c)/2;if(r===c)e=a=0;else{const u=r-c;switch(a=h>.5?u/(2-r-c):u/(r+c),r){case s:e=(o-i)/u+(o<i?6:0);break;case o:e=(i-s)/u+2;break;case i:e=(s-o)/u+4;break}e/=6}return{h:Math.round(e*360),s:Math.round(a*100),l:Math.round(h*100)}},nt=function(t){for(let s=t.length-1;s>0;s--){const o=Math.floor(Math.random()*(s+1));[t[s],t[o]]=[t[o],t[s]]}return t},ot=function(){z=[],v.innerHTML="",w=document.createElementNS(tt,"g"),v.appendChild(w);const{width:t,height:s}=v.getBoundingClientRect(),o=window.innerWidth,i=Math.max(n.minScaleFactor,Math.min(n.maxScaleFactor,o/n.referenceWidth)),r=n.baseLargeMinBlobSize*i,c=n.baseLargeMaxBlobSize*i,e=n.baseSmallMinBlobSize*i,a=n.baseSmallMaxBlobSize*i;let h=[];const u=Object.keys(k);if(u.length===0)console.error("No color Scheme defined! Using fallback."),h=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const l=u[Math.floor(Math.random()*u.length)];console.log(`Using scheme: ${l}`);const f=k[l]?[...k[l]]:[];if(f.length===0)console.error(`Selected scheme '${l}' is empty. Using fallback.`),h=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const C=nt(f);h=[];for(let g=0;g<n.numBlobs;g++)h.push(C[g%C.length]);C.length<n.numBlobs&&console.warn(`Scheme '${l}' has only ${C.length} colors. Repeating colors for ${n.numBlobs} blobs.`)}}const y=Math.ceil(n.numBlobs/2);for(let l=0;l<y;l++)X(l,r,c,h[l],t,s);for(let l=y;l<n.numBlobs;l++)X(l,e,a,h[l%h.length],t,s)},X=function(t,s,o,i,r,c){const e=p(s/2,o/2),a={x:p(e,r-e),y:p(e,c-e)},h=st(i);h||console.error(`Invalid initial hex color: ${i}. Skipping blob ${t}.`);const u=it(0,0,e,.3,.2,8),y=V(u.points),l={x:p(-1,1)*n.speedMultiplier,y:p(-1,1)*n.speedMultiplier},f=p(0,360),C=p(-.15,.15),g=document.createElementNS(tt,"path");g.setAttribute("d",y),h?g.setAttribute("fill",i):g.setAttribute("fill","#808080"),g.setAttribute("transform",`translate(${a.x}, ${a.y}) rotate(${f})`),g.style.opacity=String(n.opacity),w.appendChild(g);const ft={id:t,pathElement:g,position:a,velocity:l,radius:e,color:i,hsl:h||{h:0,s:0,l:50},points:u.points,angle:f,angularVelocity:C,baseAngles:u.angles,baseRadii:u.radii,deformationTime:0,deformationSpeed:p(.005,.015),deformationAmplitude:e*p(.05,.15),update:function(W,dt,pt,mt){if(this.deformationTime+=1,n.enableShapeChanging){const B=[],b=this.baseAngles.length;for(let d=0;d<b;d++){const M=this.baseAngles[d],S=this.baseRadii[d],L=Math.sin(this.deformationTime*this.deformationSpeed+M*3)*this.deformationAmplitude,P=Math.max(S*.3,S+L),N=Math.cos(M)*P,O=Math.sin(M)*P;B.push({x:N,y:O})}const x=V(B);this.pathElement.setAttribute("d",x)}if(this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.angle+=this.angularVelocity,n.enableMouseInteraction&&W){const B=this.position.x-W.x,b=this.position.y-W.y,x=Math.sqrt(B*B+b*b),d=n.mouseInfluenceRadius+this.radius*1.2;if(x<d){const M=((d-x)/d)**1.5,S=Math.atan2(b,B);this.velocity.x+=Math.cos(S)*M*n.mouseForce*n.speedMultiplier*5,this.velocity.y+=Math.sin(S)*M*n.mouseForce*n.speedMultiplier*5}}const _=Math.sqrt(this.velocity.x**2+this.velocity.y**2),q=1.5*n.speedMultiplier;if(_>q&&(this.velocity.x*=q/_,this.velocity.y*=q/_),this.velocity.x*=.99,this.velocity.y*=.99,n.enableCollisionDetection)for(const b of dt){if(this.id===b.id)continue;const x=b.position.x-this.position.x,d=b.position.y-this.position.y,M=Math.sqrt(x*x+d*d),S=(this.radius+b.radius)*.5;if(M<S){const L=S-M,P=Math.atan2(d,x),N=Math.cos(P)*L*.01,O=Math.sin(P)*L*.01;this.velocity.x-=N,this.velocity.y-=O}}const K=pt,Q=mt,I=.05*n.speedMultiplier;this.position.x<this.radius&&(this.velocity.x+=I),this.position.x>K-this.radius&&(this.velocity.x-=I),this.position.y<this.radius&&(this.velocity.y+=I),this.position.y>Q-this.radius&&(this.velocity.y-=I),this.position.x=Math.max(this.radius/2,Math.min(K-this.radius/2,this.position.x)),this.position.y=Math.max(this.radius/2,Math.min(Q-this.radius/2,this.position.y));const H=.01;Math.abs(this.velocity.x)<H&&Math.abs(this.velocity.y)<H&&Math.abs(this.angularVelocity)<H||this.pathElement.setAttribute("transform",`translate(${this.position.x}, ${this.position.y}) rotate(${this.angle})`)}};z.push(ft)},Y=function(t){const s=t-U;if(U=t,!F&&s>0){const r=1e3/s;if($.push(r),$.length>T&&$.shift(),$.length===T){const c=$.reduce((a,h)=>a+h,0)/T;let e=m;if(c<Z?e=1:c<J?e=2:c<lt?e=3:e=4,e===m)A=0;else{let a=!1;e>m?(m===1&&c>=ct||m===2&&c>=at||m===3&&c>=rt)&&(a=!0):(m===4&&c<ht||m===3&&c<J||m===2&&c<Z)&&(a=!0),a?(A++,A>=ut&&(et(e),A=0)):A=0}}}const{width:o,height:i}=v.getBoundingClientRect();w&&(E.x+=(D.x-E.x)*j,E.y+=(D.y-E.y)*j,w.setAttribute("transform",`translate(${E.x}, ${E.y})`)),z.forEach(r=>r.update(R,z,o,i)),requestAnimationFrame(Y)};const F="maxTouchPoints"in navigator&&navigator.maxTouchPoints>0||window.innerWidth<1024;console.log(`Lower performance device detected: ${F}`);const n={numBlobs:F?2:4,baseLargeMinBlobSize:1e3,baseLargeMaxBlobSize:1600,baseSmallMinBlobSize:600,baseSmallMaxBlobSize:1e3,referenceWidth:1440,minScaleFactor:.5,maxScaleFactor:1.5,speedMultiplier:F?.5:1,mouseInfluenceRadius:580,mouseForce:-800,opacity:.8,enableShapeChanging:!1,enableCollisionDetection:!F,enableMouseInteraction:!F};let z=[],R=null,w=null;const D={x:0,y:0},E={x:0,y:0},j=.05,G=-.03;let m=F?1:3;const $=[],T=60;let U=performance.now();const Z=30,ct=35,J=40,at=45,lt=55,rt=55,ht=50;let A=0;const ut=30;v.classList.add("css-hue-shift-active");const k={reds:["#FF6B6B","#FFD93D","#F2bF47","#F2B707","#F28706","#F26430"],oranges:["#FFa700","#FF9B58","#F27149","#F9c443","#faD93D"],yellows:["#FFD700","#FFDB58","#F2E109","#F9D423","#caD93D"],greens:["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"],cyans:["#40E0D0","#AFEEEE","#7FFFD4","#B3E0F2","#9EfDF2"],blues:["#87CEEB","#64f5ED","#7De6FF","#42d5FF","#7299f9"],forest:["#64f5ED","#F2E109","#32CD32","#32CD32","#a0e9c4"],purples:["#996BcB","#c2aFF7","#8267d7","#FF55ff","#e264d0"],browns:["#8B4513","#A0522D","#D2691E","#DAA520","#8B3030"],winter:["#87CEEB","#64f5ED","#7De6FF","#cccccc","#ffffff"]};window.addEventListener("mousemove",t=>{if(n.enableMouseInteraction){const s=v.getBoundingClientRect(),o=t.clientX,i=t.clientY;R={x:o-s.left,y:i-s.top};const r=window.innerWidth/2,c=window.innerHeight/2;D.x=(o-r)*G,D.y=(i-c)*G}}),window.addEventListener("mouseleave",()=>{R=null,D.x=0,D.y=0}),ot(),requestAnimationFrame(Y)}else console.error("Dynamic background SVG container not found.");
