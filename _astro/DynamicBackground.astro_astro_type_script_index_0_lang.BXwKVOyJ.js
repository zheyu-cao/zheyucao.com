const X="http://www.w3.org/2000/svg",S=document.getElementById("dynamic-background-svg");if(S){let p=function(t,o){return Math.random()*(o-t)+t},Y=function(t,o,i,e,l,a){const s=[],c=[],n=[],u=Math.PI*2/a;for(let d=0;d<a;d++){const r=d*u;c.push(r);let f=i+p(-e,e)*i;f+=p(0,l)*i,f=Math.max(i*.2,f),n.push(f),s.push({x:t+Math.cos(r)*f,y:o+Math.sin(r)*f})}return{points:s,angles:c,radii:n}},G=function(t){if(t.length<3)return"";let o=`M ${t[0].x} ${t[0].y}`;const i=t.length;for(let e=0;e<i;e++){const l=t[(e-1+i)%i],a=t[e],s=t[(e+1)%i],c=t[(e+2)%i],n=a.x+(s.x-l.x)/6,u=a.y+(s.y-l.y)/6,d=s.x-(c.x-a.x)/6,r=s.y-(c.y-a.y)/6;o+=` C ${n} ${u}, ${d} ${r}, ${s.x} ${s.y}`}return o+=" Z",o},O=function(t){if(t=t.replace(/^#/,""),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return null;const o=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16)/255,e=parseInt(t.substring(4,6),16)/255,l=Math.max(o,i,e),a=Math.min(o,i,e);let s=0,c=0;const n=(l+a)/2;if(l===a)s=c=0;else{const u=l-a;switch(c=n>.5?u/(2-l-a):u/(l+a),l){case o:s=(i-e)/u+(i<e?6:0);break;case i:s=(e-o)/u+2;break;case e:s=(o-i)/u+4;break}s/=6}return{h:Math.round(s*360),s:Math.round(c*100),l:Math.round(n*100)}},U=function(t,o,i){o/=100,i/=100;const e=(1-Math.abs(2*i-1))*o,l=e*(1-Math.abs(t/60%2-1)),a=i-e/2;let s=0,c=0,n=0;0<=t&&t<60?(s=e,c=l,n=0):60<=t&&t<120?(s=l,c=e,n=0):120<=t&&t<180?(s=0,c=e,n=l):180<=t&&t<240?(s=0,c=l,n=e):240<=t&&t<300?(s=l,c=0,n=e):300<=t&&t<360&&(s=e,c=0,n=l),s=Math.round((s+a)*255),c=Math.round((c+a)*255),n=Math.round((n+a)*255);const u=d=>d.toString(16).padStart(2,"0");return`#${u(s)}${u(c)}${u(n)}`},j=function(t){for(let o=t.length-1;o>0;o--){const i=Math.floor(Math.random()*(o+1));[t[o],t[i]]=[t[i],t[o]]}return t},Z=function(){$=[],S.innerHTML="",E=document.createElementNS(X,"g"),S.appendChild(E);const{width:t,height:o}=S.getBoundingClientRect(),i=window.innerWidth,e=Math.max(h.minScaleFactor,Math.min(h.maxScaleFactor,i/h.referenceWidth)),l=h.baseLargeMinBlobSize*e,a=h.baseLargeMaxBlobSize*e,s=h.baseSmallMinBlobSize*e,c=h.baseSmallMaxBlobSize*e;let n=[];const u=Object.keys(A);if(u.length===0)console.error("No color Scheme defined! Using fallback."),n=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const r=u[Math.floor(Math.random()*u.length)];console.log(`Using scheme: ${r}`);const f=A[r]?[...A[r]]:[];if(f.length===0)console.error(`Selected scheme '${r}' is empty. Using fallback.`),n=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const F=j(f);n=[];for(let m=0;m<h.numBlobs;m++)n.push(F[m%F.length]);F.length<h.numBlobs&&console.warn(`Scheme '${r}' has only ${F.length} colors. Repeating colors for ${h.numBlobs} blobs.`)}}const d=Math.ceil(h.numBlobs/2);for(let r=0;r<d;r++)I(r,l,a,n[r],t,o);for(let r=d;r<h.numBlobs;r++)I(r,s,c,n[r%n.length],t,o)},I=function(t,o,i,e,l,a){const s=p(o/2,i/2),c={x:p(s,l-s),y:p(s,a-s)},n=O(e);n||console.error(`Invalid initial hex color: ${e}. Skipping blob ${t}.`);const u=Y(0,0,s,.3,.2,8),d=G(u.points),r={x:p(-1,1)*h.speedMultiplier,y:p(-1,1)*h.speedMultiplier},f=p(0,360),F=p(-.15,.15),m=document.createElementNS(X,"path");m.setAttribute("d",d),n?m.setAttribute("fill",e):m.setAttribute("fill","#808080"),m.setAttribute("transform",`translate(${c.x}, ${c.y}) rotate(${f})`),m.style.opacity=String(h.opacity),E.appendChild(m);const K={id:t,pathElement:m,position:c,velocity:r,radius:s,color:e,hsl:n||{h:0,s:0,l:50},points:u.points,angle:f,angularVelocity:F,baseAngles:u.angles,baseRadii:u.radii,deformationTime:0,deformationSpeed:p(.005,.015),deformationAmplitude:s*p(.05,.15),update:function(z,Q,_,tt){this.deformationTime+=1,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.angle+=this.angularVelocity;{this.hsl.h=(this.hsl.h+J+360)%360;const x=U(this.hsl.h,this.hsl.s,this.hsl.l);this.pathElement.setAttribute("fill",x)}if(z){const x=this.position.x-z.x,y=this.position.y-z.y,B=Math.sqrt(x*x+y*y),g=h.mouseInfluenceRadius+this.radius*1.2;if(B<g){const D=((g-B)/g)**1.5,v=Math.atan2(y,x);this.velocity.x+=Math.cos(v)*D*h.mouseForce*h.speedMultiplier*5,this.velocity.y+=Math.sin(v)*D*h.mouseForce*h.speedMultiplier*5}}const L=Math.sqrt(this.velocity.x**2+this.velocity.y**2),k=1.5*h.speedMultiplier;L>k&&(this.velocity.x*=k/L,this.velocity.y*=k/L),this.velocity.x*=.99,this.velocity.y*=.99;for(const y of Q){if(this.id===y.id)continue;const B=y.position.x-this.position.x,g=y.position.y-this.position.y,D=Math.sqrt(B*B+g*g),v=(this.radius+y.radius)*.5;if(D<v){const R=v-D,V=Math.atan2(g,B),et=Math.cos(V)*R*.01,st=Math.sin(V)*R*.01;this.velocity.x-=et,this.velocity.y-=st}}const P=_,q=tt,w=.05*h.speedMultiplier;this.position.x<this.radius&&(this.velocity.x+=w),this.position.x>P-this.radius&&(this.velocity.x-=w),this.position.y<this.radius&&(this.velocity.y+=w),this.position.y>q-this.radius&&(this.velocity.y-=w),this.position.x=Math.max(this.radius/2,Math.min(P-this.radius/2,this.position.x)),this.position.y=Math.max(this.radius/2,Math.min(q-this.radius/2,this.position.y));const H=.01;Math.abs(this.velocity.x)<H&&Math.abs(this.velocity.y)<H&&Math.abs(this.angularVelocity)<H||this.pathElement.setAttribute("transform",`translate(${this.position.x}, ${this.position.y}) rotate(${this.angle})`)}};$.push(K)},W=function(){const{width:t,height:o}=S.getBoundingClientRect();E&&(M.x+=(b.x-M.x)*N,M.y+=(b.y-M.y)*N,E.setAttribute("transform",`translate(${M.x}, ${M.y})`)),$.forEach(i=>i.update(C,$,t,o)),requestAnimationFrame(W)};const h={numBlobs:4,baseLargeMinBlobSize:1e3,baseLargeMaxBlobSize:1600,baseSmallMinBlobSize:600,baseSmallMaxBlobSize:1e3,referenceWidth:1440,minScaleFactor:.5,maxScaleFactor:1.5,speedMultiplier:1,mouseInfluenceRadius:580,mouseForce:-800,opacity:.8};let $=[],C=null,E=null;const b={x:0,y:0},M={x:0,y:0},N=.05,T=-.03,A={reds:["#FF6B6B","#FFD93D","#F2bF47","#F2B707","#F28706","#F26430"],oranges:["#FFa700","#FF9B58","#F27149","#F9c443","#faD93D"],yellows:["#FFD700","#FFDB58","#F2E109","#F9D423","#caD93D"],greens:["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"],cyans:["#40E0D0","#AFEEEE","#7FFFD4","#B3E0F2","#9EfDF2"],blues:["#87CEEB","#64f5ED","#7De6FF","#42d5FF","#7299f9"],forest:["#64f5ED","#F2E109","#32CD32","#32CD32","#a0e9c4"],purples:["#996BcB","#c2aFF7","#8267d7","#FF55ff","#e264d0"],browns:["#8B4513","#A0522D","#D2691E","#DAA520","#8B3030"],winter:["#87CEEB","#64f5ED","#7De6FF","#cccccc","#ffffff"]},J=.4;window.addEventListener("mousemove",t=>{{const o=S.getBoundingClientRect(),i=t.clientX,e=t.clientY;C={x:i-o.left,y:e-o.top};const l=window.innerWidth/2,a=window.innerHeight/2;b.x=(i-l)*T,b.y=(e-a)*T}}),window.addEventListener("mouseleave",()=>{C=null,b.x=0,b.y=0}),Z(),W()}else console.error("Dynamic background SVG container not found.");
