---
import SubPageLayout from "../layouts/SubPageLayout.astro";
import ProjectCard from "../components/projects/ProjectCard.astro";
// Import data from the new file
import { allProjectsData } from "../data/projectsData";

// Use imported data
const projects = allProjectsData;

// Remove inline data definition
// const projects = [ ... ];
---

<SubPageLayout title="Projects">
  <p class="page-intro">
    Here are some of the projects I've worked on. You can find more details and other experiments on
    my GitHub profiles.
  </p>
  <div class="projects-grid">
    {
      projects.map((project) => (
        <ProjectCard
          title={project.title}
          timeframe={project.timeframe}
          imageSrc={project.imageSrc}
          imageAlt={project.imageAlt}
          githubUrl={project.githubUrl}
          projectUrl={project.projectUrl}
          techStack={project.techStack}
        >
          {/* Use set:html directly on a div or similar inside the slot */}
          <div set:html={project.description} />
        </ProjectCard>
      ))
    }
  </div>
</SubPageLayout>

<style>
  .page-intro {
    font-size: 1.2rem;
    color: var(--text-muted);
    margin-bottom: 3rem;
    max-width: 70ch;
  }
  .projects-grid {
    /* display: grid; */ /* Remove grid display */
    /* grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); */
    /* align-items: start; */

    /* Use CSS Columns */
    column-count: 1; /* Default to 1 column on mobile */
    column-gap: 3rem; /* Adjust gap */
    gap: 3rem; /* Keep vertical gap between items in the same column */
  }

  /* Apply multi-column layout for wider screens */
  @media (min-width: 1024px) {
    .projects-grid {
      column-count: 2;
      column-gap: 3rem; /* Use the larger gap for desktop */
      gap: 3rem;
    }
  }

  /* Ensure cards don't break across columns */
  .projects-grid > :global(.project-card) {
    break-inside: avoid;
    /* margin-bottom is handled by the grid gap, but ensure it exists */
    /* margin-bottom: 3rem; */
  }
</style>
