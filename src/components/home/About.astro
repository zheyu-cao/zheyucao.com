---
// Component: src/components/home/About.astro
---

<section class="about-section" id="about-section">
  <h2 class="about-title scroll-target-title">About Me</h2>
  <p class="about-content scroll-target-content">
    This is some placeholder text about me. This site is still under construction!
  </p>
</section>

<style>
  /* Styles moved from index.astro, now scoped to About component */
  .about-section {
    padding: 15vh 10%;
    min-height: 70vh;
  }

  .about-title {
    font-size: clamp(2rem, 2rem + 2vw, 4rem);
    font-weight: 600;
    margin-bottom: 1em;
  }

  .about-content {
    font-size: 1.2rem;
    line-height: 1.6;
    max-width: 65ch;
  }
</style>

<script>
  // GSAP Animations specific to the About section
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger); // Register plugin here for this component

  const pageWrapper = document.querySelector(".page-wrapper"); // Get the scroller

  // --- About Title Animation (De-blur -> Re-blur Scrub Timeline) ---
  const aboutTitle = document.querySelector(".scroll-target-title");
  if (aboutTitle && pageWrapper) {
    // Check for both elements
    gsap.set(aboutTitle, { filter: "blur(8px)", opacity: 0 });
    const titleTimeline = gsap.timeline({
      scrollTrigger: {
        trigger: aboutTitle,
        scroller: pageWrapper,
        start: "top 90%",
        end: "bottom 0%",
        scrub: 1,
        // markers: true,
      },
    });
    titleTimeline
      .to(aboutTitle, { filter: "blur(0px)", opacity: 1, ease: "none", duration: 2 })
      .to(aboutTitle, { filter: "blur(8px)", opacity: 0, ease: "none", duration: 1 });
  }

  // --- About Content Animation (Fade/Move In -> Fade/Move Out Scrub Timeline) ---
  const aboutContent = document.querySelector(".scroll-target-content");
  if (aboutContent && pageWrapper) {
    // Check for both elements
    gsap.set(aboutContent, { opacity: 0, y: 30 });
    const contentTimeline = gsap.timeline({
      scrollTrigger: {
        trigger: aboutContent,
        scroller: pageWrapper,
        start: "top 85%",
        end: "bottom 15%",
        scrub: 1,
        // markers: { startColor: "green", endColor: "red", indent: 100 },
      },
    });
    contentTimeline
      .to(aboutContent, { opacity: 1, y: 0, ease: "power1.inOut", duration: 2 })
      .to(aboutContent, { opacity: 0, y: -30, ease: "power1.inOut", duration: 1 });
  }
</script>
